<!DOCTYPE html>
<div id="container"></div>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script type="module">

const data = [
    {
        date: "2023-02-01",
        value: 45
    },
    {
        date: "2023-05-01",
        value: 25
    },
    {
        date: "2023-08-01",
        value: 80
    },
]

// Declare the chart dimensions and margins.
const width = 640;
const height = 400;
const marginTop = 20;
const marginRight = 20;
const marginBottom = 30;
const marginLeft = 40;

// Declare the x (horizontal position) scale.
const x = d3.scaleUtc()
    .domain([new Date("2023-01-01"), new Date("2024-01-01")])
    .range([marginLeft, width - marginRight]);

// Declare the y (vertical position) scale.
const y = d3.scaleLinear()
    .domain([0, 100])
    .range([height - marginBottom, marginTop]);

// Create the SVG container.
const svg = d3.select("#container")
    .append("svg")
    .attr("width", width)
    .attr("height", height);
// const svg = d3.create("svg")
//     .attr("width", width)
//     .attr("height", height);

const div = d3.select("#container")
    .append("div")
    .attr("class", "tooltip")
    .style("opacity", 1)
    .style("left", "50px")
    .style("top", "50px");
// const div = d3.create("div")
//     .attr("class", "tooltip-donut")
//     .style("opacity", 0);

// Add the x-axis.
svg.append("g")
    .attr("transform", `translate(0,${height - marginBottom})`)
    .call(d3.axisBottom(x));

// Add the y-axis.
svg.append("g")
    .attr("transform", `translate(${marginLeft},0)`)
    .call(d3.axisLeft(y))
    .call(g => g.select(".domain").remove());

svg.append("g")
    // .selectAll("circle")
    // .data(data)
    // .enter()
    // .append("circle")
    .selectAll()
    .data(data)
    .join("circle")
    .attr("cx", d => x(new Date(d.date)))
    .attr("cy", d => y(d.value))
    .attr("r", 10)
    .attr("fill", "red")
    .on("mouseover", (event, d) => {
        d3.select(this)
            .transition()
            .duration(500)
            .attr("opacity", "0.5");

        div.transition()
            .duration(500)
            .style("opacity", 1);


        div.html(`${d.date}: <br>${d.value}`)
            .style("left", (event.pageX + 10) + "px")
            .style("top", (event.pageY - 15) + "px");
    })
    .on("mouseout", (event, d) => {
        d3.select(this)
            .transition()
            .duration(500)
            .attr("opacity", "1");

        div.transition()
            .duration(500)
            .style("opacity", 0);
    })

// Append the SVG element.
//container.append(svg.node());
//container.append(div.node());

</script>

<style>
    .tooltip {
         position: absolute;
         text-align: center;
         padding: 5px;
         background: #FFFFFF;
         color: #313639;
         border: 1px solid #313639;
         border-radius: 8px;
         pointer-events: none;
         font-size: 15px;
    }
</style>